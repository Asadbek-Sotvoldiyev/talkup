{% extends 'base.html' %}

{% block title %}
Kirish - TalkUp
{% endblock %}

{% block body_class %}bg-slate-100 min-h-screen flex items-center justify-center p-4{% endblock %}

{% block body %}
<div class="w-full max-w-md relative">

  <div class="absolute -inset-8 -z-10 opacity-60 blur-3xl">
    <div class="absolute -top-10 -left-8 h-56 w-56 rounded-full bg-slate-200"></div>
    <div class="absolute -bottom-14 -right-8 h-64 w-64 rounded-full bg-slate-200"></div>
  </div>

  <div class="rounded-[28px] bg-white/80 backdrop-blur-xl shadow-2xl ring-1 ring-slate-200/70 overflow-hidden">

    <div class="flex items-center justify-between px-5 py-4 border-b border-slate-200/70 bg-white/60">
      <a href="{% url 'home' %}" class="inline-flex items-center gap-2 text-sm text-slate-600 hover:text-slate-900 transition">
        <span class="inline-flex w-9 h-9 items-center justify-center rounded-xl bg-white ring-1 ring-slate-200 shadow-sm">
          <i data-lucide="arrow-left" class="w-4 h-4"></i>
        </span>
        <span class="font-medium">Ortga</span>
      </a>

      <a href="{% url 'terms' %}" class="text-sm text-slate-600 hover:text-slate-900 underline underline-offset-4 transition">
        Shartlar
      </a>
    </div>

    <div class="p-8">

      <div class="text-center">
        <div class="mx-auto mb-4 w-16 h-16 rounded-2xl bg-slate-900 text-white flex items-center justify-center shadow-md">
          <i data-lucide="shield-check" class="w-8 h-8"></i>
        </div>

        <h2 class="text-2xl font-bold tracking-tight text-slate-900">Tizimga kirish</h2>
        <p class="mt-2 text-sm text-slate-600 leading-relaxed">Google orqali tez va xavfsiz kirish</p>
      </div>

      <div class="mt-8">
        <form action="/accounts/google/login/" method="post" id="providerForm">
          {% csrf_token %}
          <button type="submit" id="googleBtn"
                  class="group w-full rounded-2xl border border-slate-200 bg-white px-4 py-3
                         shadow-sm hover:shadow-md hover:-translate-y-[1px] transition
                         active:translate-y-0 active:shadow-sm
                         focus:outline-none focus-visible:ring-4 focus-visible:ring-slate-200
                         disabled:opacity-60 disabled:cursor-not-allowed">

            <div class="flex items-center gap-3" id="btnMain">
              <span class="w-10 h-10 rounded-xl bg-slate-50 border border-slate-200 flex items-center justify-center transition group-hover:bg-white">
                <svg class="w-5 h-5" viewBox="0 0 48 48" aria-hidden="true">
                  <path fill="#EA4335" d="M24 9.5c3.54 0 6.74 1.22 9.25 3.6l6.9-6.9C35.6 2.3 30.2 0 24 0 14.6 0 6.4 5.4 2.5 13.3l8.1 6.3C12.6 13 17.9 9.5 24 9.5z"/>
                  <path fill="#34A853" d="M46.1 24.5c0-1.7-.2-3.3-.6-4.8H24v9.1h12.4c-.5 2.9-2.2 5.3-4.7 7l7.2 5.6c4.2-3.9 7.2-9.7 7.2-16.9z"/>
                  <path fill="#FBBC05" d="M10.6 28.6c-.5-1.4-.8-2.9-.8-4.6s.3-3.2.8-4.6l-8.1-6.3C.9 16.5 0 20.1 0 24s.9 7.5 2.5 10.9l8.1-6.3z"/>
                  <path fill="#4285F4" d="M24 48c6.2 0 11.4-2 15.2-5.5l-7.2-5.6c-2 1.3-4.6 2.1-8 2.1-6.1 0-11.4-3.5-13.4-8.6l-8.1 6.3C6.4 42.6 14.6 48 24 48z"/>
                </svg>
              </span>

              <span class="flex-1 text-left font-semibold text-slate-800 group-hover:text-slate-900 transition">
                Google orqali davom etish
              </span>

              <i data-lucide="arrow-right" class="w-5 h-5 text-slate-400 group-hover:text-slate-700 transition"></i>
            </div>

            <div class="hidden items-center justify-center gap-2 text-slate-600" id="btnLoading">
              <svg class="w-4 h-4 animate-spin" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" opacity=".25"></circle>
                <path d="M21 12a9 9 0 0 0-9-9" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path>
              </svg>
              <span class="text-sm font-medium">Yuklanmoqda…</span>
            </div>

          </button>
        </form>
      </div>

      <div class="mt-6 rounded-2xl border border-slate-200 bg-slate-50 p-4">
        <ul class="space-y-2 text-sm text-slate-600">
          <li class="flex gap-2"><i data-lucide="lock" class="w-4 h-4 mt-0.5 text-slate-700"></i><span>Parol provayderda qoladi.</span></li>
          <li class="flex gap-2"><i data-lucide="shield" class="w-4 h-4 mt-0.5 text-slate-700"></i><span>Minimal ruxsatlar olinadi.</span></li>
          <li class="flex gap-2"><i data-lucide="unlink" class="w-4 h-4 mt-0.5 text-slate-700"></i><span>Istalgan payt uzib qo‘yish mumkin.</span></li>
        </ul>
      </div>

      <p class="mt-5 text-center text-xs text-slate-500 leading-relaxed">
        Davom etish orqali
        <a href="{% url 'terms' %}" class="font-medium text-slate-700 hover:text-slate-900 underline underline-offset-2">foydalanish shartlari</a>
        bilan tanishganingizni tasdiqlaysiz.
      </p>

      <div class="mt-7 pt-5 border-t border-slate-200/70 text-center text-xs text-slate-400">
        © {{ year }} TalkUp. Barcha huquqlar himoyalangan.
      </div>

    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  lucide.createIcons();

  const form = document.getElementById("providerForm");
  const btn = document.getElementById("googleBtn");
  const main = document.getElementById("btnMain");
  const loading = document.getElementById("btnLoading");

  form.addEventListener("submit", () => {
    btn.disabled = true;
    main.classList.add("hidden");
    loading.classList.remove("hidden");
    loading.classList.add("flex");
  });
</script>
{% endblock %}